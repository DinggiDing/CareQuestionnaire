/* eslint-disable */
import { Box, Grid, Typography } from '@mui/material';
import { useState, useEffect } from 'react';
import "./micStyles.css";

const styles = {
    footer: {
        width: '100vw',
    },
    captions: {
        borderRadius: 3,
        position: 'fixed',
        bottom: '2%',
        left: '20%',
        maxHeight: '10%',
        width: '60%',
        textAlign: 'center',
        backgroundColor: 'rgba(0, 0, 0, 0.5)',
        color: "white",
        zIndex: 2,
    }
} as const;

export default function MicFooterIcon({ micOn, changeMic, transcript, userWantsMicOn }: { micOn: Boolean, changeMic: any, transcript: string, userWantsMicOn: Boolean }) {
    const [onfillColor, setOnFillColor] = useState("#0B7538");
    const [cursorType, setCursor] = useState("auto");
    const [offFilColor, setOffFillColor] = useState("black");
    const [onOpacity, setOnOpacity] = useState("0%");
    const [offOpacity, setOffOpacity] = useState("100%");
    const [backColor, setBackColor] = useState("#B1B1B1");
    const [listening, setListening] = useState(true);

    useEffect(() => {
        setListening(micOn.valueOf());
        if (userWantsMicOn) {
            setOnOpacity("100%");
            setOffOpacity("0%");
            setBackColor("#BAEACF");
        } else {
            setOnOpacity("0%");
            setOffOpacity("100%");
            setBackColor("#B1B1B1");
        }
    }, [userWantsMicOn])

    useEffect(() => {
        if (transcript === "") {
            setListening(false);
        } else {
            setListening(true);
        }
    }, [transcript])

    function onEnter() {
        setOnFillColor("white");
        setOffFillColor("white");
        setCursor("pointer");
    }

    function onLeave() {
        setOnFillColor("#0B7538");
        setOffFillColor("black");
        setCursor("auto");
    }

    function onPress() {
        changeMic();
    }

    return (
        <Grid item>
            {transcript ?
                <Typography noWrap={true} sx={styles.captions} align='center' variant='h3'>{transcript.length > 5 ? transcript.split(/\s+/).slice(-5).join(" ") : transcript}</Typography>
                : <></>}
            <Grid item sx={styles.footer}>
                <svg viewBox="0 0 1194 123" fill="none" xmlns="http://www.w3.org/2000/svg" width="100%">
                    <g>
                        <path fillRule="evenodd" clipRule="evenodd" d="M987.543 43C1001.05 43 1012.43 33.6571 1020.91 23.1405C1032.27 9.03594 1049.76 0 1069.38 0C1089 0 1106.49 9.03596 1117.86 23.1405C1126.33 33.6572 1137.72 43 1151.22 43H1203C1203.55 43 1204 43.4477 1204 44V122C1204 122.552 1203.55 123 1203 123H1069.38H1.00003C0.447746 123 0 122.552 0 122V44C0 43.4477 0.447715 43 1 43H987.543Z"
                            fill={backColor} />
                        <path d="M1088.36 39.8984C1087.03 39.8984 1085.94 40.9871 1085.94 42.3224C1085.94 50.5684 1079.23 57.2813 1070.98 57.2813C1062.74 57.2753 1056.03 50.5751 1056.02 42.3347C1056.03 41.6912 1055.8 41.0837 1055.36 40.6205C1054.9 40.1514 1054.29 39.8988 1053.63 39.8988C1052.3 39.8988 1051.21 40.9875 1051.21 42.3228C1051.21 47.3391 1053.1 52.127 1056.53 55.802C1059.73 59.2304 1063.97 61.3898 1068.58 61.9493V68.8423H1062.25C1060.91 68.8423 1059.82 69.931 1059.82 71.2663C1059.82 72.6016 1060.91 73.6903 1062.25 73.6903H1079.76C1081.09 73.6903 1082.18 72.6016 1082.18 71.2663C1082.18 69.931 1081.09 68.8423 1079.76 68.8423H1073.42V61.9493C1078.02 61.3839 1082.27 59.2246 1085.47 55.7963C1088.9 52.1213 1090.79 47.3337 1090.79 42.3233C1090.78 40.988 1089.7 39.8993 1088.36 39.8993L1088.36 39.8984Z" fill={onfillColor} opacity={onOpacity} />
                        <path d="M1071.01 54.3746C1077.66 54.3746 1083.08 48.9612 1083.08 42.3089V27.3079C1083.08 20.6555 1077.66 15.2422 1071.01 15.2422C1064.36 15.2422 1058.95 20.6555 1058.95 27.3079V42.3089C1058.95 48.9612 1064.36 54.3746 1071.01 54.3746Z" fill={onfillColor} opacity={onOpacity} />
                        <path d="M1031.58 87.6914H1035.13L1039.88 99.2852H1040.06L1044.81 87.6914H1048.36V103.691H1045.58V92.6992H1045.43L1041.01 103.645H1038.93L1034.51 92.6758H1034.36V103.691H1031.58V87.6914ZM1054.41 87.6914V103.691H1051.52V87.6914H1054.41ZM1071.25 93.0898H1068.33C1068.24 92.6107 1068.09 92.1862 1067.87 91.8164C1067.64 91.4414 1067.36 91.1237 1067.03 90.8633C1066.7 90.6029 1066.32 90.4076 1065.89 90.2773C1065.47 90.1419 1065.01 90.0742 1064.52 90.0742C1063.65 90.0742 1062.88 90.293 1062.21 90.7305C1061.54 91.1628 1061.01 91.7982 1060.63 92.6367C1060.25 93.4701 1060.06 94.4883 1060.06 95.6914C1060.06 96.9154 1060.25 97.9466 1060.63 98.7852C1061.02 99.6185 1061.54 100.249 1062.21 100.676C1062.88 101.098 1063.65 101.309 1064.51 101.309C1064.99 101.309 1065.44 101.246 1065.86 101.121C1066.28 100.991 1066.66 100.801 1066.99 100.551C1067.33 100.301 1067.61 99.9935 1067.84 99.6289C1068.08 99.2643 1068.24 98.8477 1068.33 98.3789L1071.25 98.3945C1071.14 99.1549 1070.9 99.8685 1070.54 100.535C1070.18 101.202 1069.71 101.79 1069.12 102.301C1068.54 102.806 1067.86 103.202 1067.08 103.488C1066.29 103.77 1065.43 103.91 1064.47 103.91C1063.07 103.91 1061.81 103.585 1060.71 102.934C1059.6 102.283 1058.74 101.342 1058.1 100.113C1057.46 98.8841 1057.15 97.4102 1057.15 95.6914C1057.15 93.9674 1057.47 92.4935 1058.11 91.2695C1058.75 90.0404 1059.62 89.1003 1060.72 88.4492C1061.83 87.7982 1063.08 87.4727 1064.47 87.4727C1065.37 87.4727 1066.19 87.5977 1066.96 87.8477C1067.72 88.0977 1068.41 88.4648 1069.01 88.9492C1069.6 89.4284 1070.1 90.0169 1070.48 90.7148C1070.87 91.4076 1071.13 92.1992 1071.25 93.0898ZM1093.66 95.6914C1093.66 97.4154 1093.33 98.8919 1092.69 100.121C1092.05 101.345 1091.17 102.283 1090.06 102.934C1088.96 103.585 1087.71 103.91 1086.3 103.91C1084.9 103.91 1083.65 103.585 1082.54 102.934C1081.43 102.277 1080.56 101.337 1079.91 100.113C1079.27 98.8841 1078.95 97.4102 1078.95 95.6914C1078.95 93.9674 1079.27 92.4935 1079.91 91.2695C1080.56 90.0404 1081.43 89.1003 1082.54 88.4492C1083.65 87.7982 1084.9 87.4727 1086.3 87.4727C1087.71 87.4727 1088.96 87.7982 1090.06 88.4492C1091.17 89.1003 1092.05 90.0404 1092.69 91.2695C1093.33 92.4935 1093.66 93.9674 1093.66 95.6914ZM1090.74 95.6914C1090.74 94.4779 1090.55 93.4544 1090.17 92.6211C1089.8 91.7826 1089.28 91.1497 1088.61 90.7227C1087.94 90.2904 1087.17 90.0742 1086.3 90.0742C1085.43 90.0742 1084.67 90.2904 1084 90.7227C1083.33 91.1497 1082.81 91.7826 1082.43 92.6211C1082.05 93.4544 1081.87 94.4779 1081.87 95.6914C1081.87 96.9049 1082.05 97.931 1082.43 98.7695C1082.81 99.6029 1083.33 100.236 1084 100.668C1084.67 101.095 1085.43 101.309 1086.3 101.309C1087.17 101.309 1087.94 101.095 1088.61 100.668C1089.28 100.236 1089.8 99.6029 1090.17 98.7695C1090.55 97.931 1090.74 96.9049 1090.74 95.6914ZM1109.54 87.6914V103.691H1106.97L1099.43 92.793H1099.29V103.691H1096.4V87.6914H1098.99L1106.52 98.5977H1106.66V87.6914H1109.54Z" fill={onfillColor} opacity={onOpacity} />
                        <path fillRule="evenodd" clipRule="evenodd" d="M1080.74 47.3128C1080.74 53.9652 1075.33 59.3785 1068.67 59.3785C1062.02 59.3785 1056.61 53.9652 1056.61 47.3128V32.3118C1056.61 25.6594 1062.02 20.2461 1068.67 20.2461C1075.33 20.2461 1080.74 25.6594 1080.74 32.3118V47.3128ZM1083.6 47.3263C1083.6 45.991 1084.69 44.9023 1086.03 44.9023L1086.03 44.9032C1087.36 44.9032 1088.44 45.9919 1088.45 47.3272C1088.45 52.3376 1086.56 57.1252 1083.13 60.8002C1079.93 64.2285 1075.69 66.3877 1071.08 66.9532V73.8462H1077.42C1078.76 73.8462 1079.84 74.9349 1079.84 76.2702C1079.84 77.6055 1078.76 78.6942 1077.42 78.6942H1059.91C1058.58 78.6942 1057.49 77.6055 1057.49 76.2702C1057.49 74.9349 1058.58 73.8462 1059.91 73.8462H1066.25V66.9532C1061.64 66.3937 1057.39 64.2343 1054.19 60.8059C1050.76 57.1309 1048.88 52.3429 1048.88 47.3266C1048.88 45.9913 1049.96 44.9027 1051.3 44.9027C1051.95 44.9027 1052.57 45.1553 1053.02 45.6244C1053.46 46.0875 1053.7 46.695 1053.69 47.3386C1053.69 55.579 1060.41 62.2792 1068.65 62.2852C1076.89 62.2852 1083.6 55.5723 1083.6 47.3263Z"
                            fill={offFilColor} opacity={offOpacity} />
                        <path d="M1041.88 22.2461L1095.88 76.2461" stroke={offFilColor} strokeWidth="7"
                            strokeLinecap="round" opacity={offOpacity} />
                        <path d="M1024.82 86.9215H1028.38L1033.13 98.9049H1033.31L1038.07 86.9215H1041.63V103.46H1038.84V92.0976H1038.69L1034.27 103.411H1032.18L1027.76 92.0734H1027.6V103.46H1024.82V86.9215ZM1047.69 86.9215V103.46H1044.79V86.9215H1047.69ZM1064.56 92.5013H1061.63C1061.54 92.0061 1061.39 91.5674 1061.17 91.1851C1060.94 90.7975 1060.66 90.4691 1060.33 90.2C1060 89.9307 1059.62 89.7289 1059.19 89.5943C1058.77 89.4543 1058.31 89.3844 1057.82 89.3844C1056.94 89.3844 1056.17 89.6104 1055.5 90.0626C1054.83 90.5094 1054.3 91.1663 1053.92 92.033C1053.54 92.8943 1053.35 93.9468 1053.35 95.1904C1053.35 96.4554 1053.54 97.5214 1053.92 98.3881C1054.31 99.2495 1054.83 99.9009 1055.5 100.342C1056.17 100.778 1056.94 100.996 1057.81 100.996C1058.29 100.996 1058.74 100.932 1059.16 100.803C1059.58 100.668 1059.96 100.472 1060.29 100.213C1060.63 99.9547 1060.91 99.6371 1061.14 99.2602C1061.38 98.8834 1061.54 98.4527 1061.63 97.9682L1064.56 97.9843C1064.45 98.7703 1064.21 99.5079 1063.85 100.197C1063.49 100.886 1063.01 101.494 1062.42 102.022C1061.84 102.544 1061.16 102.953 1060.38 103.25C1059.59 103.54 1058.73 103.685 1057.77 103.685C1056.36 103.685 1055.1 103.349 1054 102.676C1052.89 102.003 1052.03 101.031 1051.38 99.7609C1050.74 98.4904 1050.43 96.9668 1050.43 95.1904C1050.43 93.4084 1050.75 91.885 1051.39 90.6198C1052.04 89.3493 1052.91 88.3776 1054.01 87.7047C1055.12 87.0319 1056.37 86.6953 1057.77 86.6953C1058.67 86.6953 1059.49 86.8245 1060.26 87.0829C1061.02 87.3413 1061.71 87.7209 1062.31 88.2215C1062.9 88.7169 1063.4 89.3251 1063.79 90.0465C1064.18 90.7625 1064.44 91.5808 1064.56 92.5013ZM1087 95.1904C1087 96.9722 1086.67 98.4985 1086.03 99.769C1085.39 101.034 1084.51 102.003 1083.4 102.676C1082.3 103.349 1081.04 103.685 1079.63 103.685C1078.23 103.685 1076.98 103.349 1075.87 102.676C1074.75 101.998 1073.88 101.026 1073.23 99.7609C1072.59 98.4904 1072.27 96.9668 1072.27 95.1904C1072.27 93.4084 1072.59 91.885 1073.23 90.6198C1073.88 89.3493 1074.75 88.3776 1075.87 87.7047C1076.98 87.0319 1078.23 86.6953 1079.63 86.6953C1081.04 86.6953 1082.3 87.0319 1083.4 87.7047C1084.51 88.3776 1085.39 89.3493 1086.03 90.6198C1086.67 91.885 1087 93.4084 1087 95.1904ZM1084.08 95.1904C1084.08 93.936 1083.89 92.8782 1083.51 92.0169C1083.14 91.1501 1082.62 90.496 1081.95 90.0546C1081.27 89.6077 1080.5 89.3844 1079.63 89.3844C1078.76 89.3844 1078 89.6077 1077.33 90.0546C1076.66 90.496 1076.14 91.1501 1075.76 92.0169C1075.38 92.8782 1075.19 93.936 1075.19 95.1904C1075.19 96.4447 1075.38 97.5053 1075.76 98.3719C1076.14 99.2332 1076.66 99.8874 1077.33 100.334C1078 100.776 1078.76 100.996 1079.63 100.996C1080.5 100.996 1081.27 100.776 1081.95 100.334C1082.62 99.8874 1083.14 99.2332 1083.51 98.3719C1083.89 97.5053 1084.08 96.4447 1084.08 95.1904ZM1089.75 103.46V86.9215H1100.02V89.4328H1092.64V93.9225H1099.31V96.4339H1092.64V103.46H1089.75ZM1102.66 103.46V86.9215H1112.93V89.4328H1105.57V93.9225H1112.22V96.4339H1105.57V103.46H1102.66Z"
                            fill={offFilColor} opacity={offOpacity} />

                        <circle cursor={cursorType} cx='1060' cy='45' r='40' fill="white" opacity="0%" onClick={onPress} ></circle>

                    </g>
                    {(micOn) ?
                        <g opacity={onOpacity} transform='translate(10,0)' >
                            <rect y='75' rx="6.5" fill="#0B7538" className={`rect1 ${listening ? "" : "paused"}`} />
                            <rect y='75' x="23" rx="6.5" fill="#0B7538" className={`rect2 ${true ? "" : "paused"}`} />
                            <rect y='75' x="46" rx="6.5" fill="#0B7538" className={`rect3 ${true ? "" : "paused"}`} />
                            <rect y='75' x="69" rx="6.5" fill="#0B7538" className={`rect4 ${true ? "" : "paused"}`} />
                            <rect y='75' x="92" rx="6.5" fill="#0B7538" className={`rect5 ${true ? "" : "paused"}`} />
                            <rect y='75' x="115" rx="6.5" fill="#0B7538" className={`rect6 ${true ? "" : "paused"}`} />
                            <rect y='75' x="138" rx="6.5" fill="#0B7538" className={`rect7 ${true ? "" : "paused"}`} />
                        </g>
                        : <></>}
                </svg>
            </Grid>
        </Grid>
    )
}
